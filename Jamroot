# (c) Copyright 2012 Felipe Magno de Almeida
#
# Distributed under the Boost Software License, Version 1.0. (See
# accompanying file LICENSE_1_0.txt or copy at
# http://www.boost.org/LICENSE_1_0.txt)

project morbid
 : build-dir bin
 : default-build <link>static <threading>multi
 ;

alias idl_parser : /boost//headers : : : <include>idl_parser/include ;

alias ior : /boost//headers : : : <include>ior/include ;

alias iiop : /boost//headers : : : <include>iiop/include ;

exe morbid_idl : idl_compiler/src/main.cpp
 idl_compiler/src/stub_generator.cpp
 idl_compiler/src/local_stub_generator.cpp
 idl_compiler/src/remote_stub_generator.cpp
 idl_compiler/src/poa_stub_generator.cpp
 idl_parser
  /boost//filesystem /boost//program_options
  : <toolset>gcc:<cxxflags>-ftemplate-depth=1000
    <include>idl_compiler/include
 ;
explicit morbid_idl ;

lib morbid : orb/src/orb.cpp orb/src/poa.cpp
 orb/src/object.cpp orb/src/connection.cpp
 ior iiop
 /boost//headers /boost//system
 : <include>orb/include
   <include>orb/include_impl
   <toolset>gcc:<cxxflags>-ftemplate-depth=1000
 : : <include>orb/include
 ; 

install install : morbid_idl morbid ;

install demos : demo/simple//simple_server demo/simple//simple_client ;

alias allprimitives : tests//allprimitives ;

alias tests : install allprimitives ;

