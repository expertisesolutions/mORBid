# (c) Copyright 2012 Felipe Magno de Almeida
#
# Distributed under the Boost Software License, Version 1.0. (See
# accompanying file LICENSE_1_0.txt or copy at
# http://www.boost.org/LICENSE_1_0.txt)

import testing ;

project tecorb/tests ;

path-constant current : . ;
path-constant install : ../install ;

make allprimitives.h : allprimitives.idl : @compileidl ;
make allprimitives.cpp : allprimitives.h : @donothing ;

actions donothing
{
}
actions compileidl
{
  $(install:G=)/tecorb_idl -i $(>) -o $(<:S=)
}

alias allprimitives :
 [ run allprimitives_client.cpp /tecorb//tecorb allprimitives.cpp
  : : : <implicit-dependency>allprimitives.h
    <implicit-dependency>allprimitives.cpp
 ]
 [ run allprimitives_server.cpp /tecorb//tecorb allprimitives.cpp
  : : : <implicit-dependency>allprimitives.h
    <implicit-dependency>allprimitives.cpp
 ]
 ;

